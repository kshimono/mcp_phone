# 05. 実装フェーズ

**Version**: 1.1
**最終更新日**: 2025-10-28

---

## 目的

詳細設計に基づいてコードを実装する。

---

## 編集可能なディレクトリ

- ✅ **編集可能**: `system/`, `docs/05_implementation/`
- 📖 **参照のみ**: `docs/00_project/` ~ `docs/04_detail_design/`
- ❌ **編集禁止**: その他全て

---

## 必須作成物（MUST CREATE）

### 1. ソースコード
- フロントエンドコード
- バックエンドコード
- データベースマイグレーションスクリプト

### 2. ビルド設定ファイル
- package.json / requirements.txt 等
- ビルドスクリプト

### 3. 環境設定ファイル
- 開発環境設定
- 本番環境設定（テンプレート）

### 4. README（開発者向け）
- セットアップ手順
- ローカル実行方法

### 5. APIドキュメント（生成版）
- Swagger/OpenAPI 等の自動生成ドキュメント

---

## 禁止事項（MUST NOT CREATE）

- ❌ 設計書の変更（設計変更は詳細設計フェーズに戻る）
- ❌ 要件の追加（要件定義フェーズに戻る）
- ❌ 統合テストケース（テストフェーズで作成）
- ❌ デプロイ手順書（デプロイフェーズで作成）
- ❌ 本番環境構築スクリプト（デプロイフェーズで作成）

---

## AIへの指示例

```
「詳細設計書に基づいて実装してください：
- [機能名] のフロントエンド実装
- [機能名] のバックエンド実装
- データベースマイグレーション

実装先: system/ 配下
ドキュメント: docs/05_implementation/

注意事項：
- 設計書の範囲内で実装してください
- 設計にない機能を追加しないでください
- docs/06_test/ 以降のフェーズのファイルは作成しないでください
- 前フェーズ（docs/04_detail_design/）のファイルは参照のみ可能です」
```

---

## 実装時のガードレール

### 1. 設計書からの逸脱禁止
- クラス名、メソッド名は設計書通りに実装
- 設計にないクラス・関数を追加しない

### 2. 仕様追加の禁止
- 要件定義にない機能を実装しない
- 「便利だから」という理由での機能追加は禁止

### 3. 過剰な最適化の禁止
- 設計書で指定されていない最適化は行わない
- パフォーマンス改善は非機能要件の範囲内

---

## セキュリティチェックリスト

このフェーズで確認すべきセキュリティ項目：

### コードレビュー
- [ ] 機密情報がハードコードされていないか
- [ ] 環境変数で秘密情報を管理しているか
- [ ] パスワード・APIキーがコミットされていないか
- [ ] 依存ライブラリに既知の脆弱性がないか

### 入力値検証の実装
- [ ] XSS対策が実装されているか（入力値のサニタイズ）
- [ ] SQLインジェクション対策が実装されているか（プリペアドステートメント）
- [ ] CSRF対策が実装されているか（CSRFトークン）

### 認証・認可の実装
- [ ] パスワードがハッシュ化されているか
- [ ] セッショントークンが安全に生成されているか
- [ ] 認可チェックが全エンドポイントで実装されているか

### ログ実装
- [ ] 認証失敗がログに記録されているか
- [ ] ログに個人情報が記録されていないか
- [ ] ログローテーションが設定されているか

---

## フェーズゲート5チェックリスト

### 基本項目
- [ ] 全クラスが詳細設計書に定義されているか
- [ ] コーディング規約に準拠しているか
- [ ] API仕様書と実装が整合しているか
- [ ] データベーススキーマが物理設計と一致しているか
- [ ] ビルドが正常に完了するか
- [ ] ローカル環境で動作するか

### 禁止事項確認
- [ ] 設計書にない機能が追加されていないか（禁止事項）
- [ ] 要件にない機能が実装されていないか（禁止事項）

### セキュリティ確認
- [ ] 機密情報がハードコードされていないか
- [ ] XSS・SQLインジェクション・CSRF対策が実装されているか
- [ ] 認証・認可が全エンドポイントで実装されているか
- [ ] 依存ライブラリに脆弱性がないか

---

## 次フェーズへの移行条件

- 全ての必須作成物が完成している
- 禁止事項に該当する成果物が含まれていない
- 前フェーズ（詳細設計）との整合性が確認されている
- フェーズゲート5チェックリストが全て合格
- 人間による承認が完了している

前フェーズ: [04_詳細設計フェーズ](./04_詳細設計フェーズ.md)
次フェーズ: [06_テストフェーズ](./06_テストフェーズ.md)
